<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <h:head>
        <title>Facelet Title</title>
        <link href="../../resources/css/style.css" rel="stylesheet" type="text/css"/>
    </h:head>
    <h:body>
      
            <h:form id="frmTempVta">
                <center>
                    <p:panelGrid>
                        <p:row>
                            <p:column class="columna1">
                                <p:outputLabel value="# Doc."/>
                            </p:column>
                            <p:column>
                                <p:inputText id="nroDoc" value="#{ventasC.regventa.ndoc}"/>
                            </p:column>
                            <p:column class="columna1">

                            </p:column>
                            <p:column class="columna4">
                                <p:outputLabel value="Fecha" for="calendar" />
                            </p:column>
                            <p:column>
                                <p:datePicker id="calendar" value="#{ventasC.regventa.fecha}" locale="es" monthNavigator="true" pattern="dd-MM-yyyy"/>                        
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column class="columna1">
                                <p:outputLabel value="Paciente"/>
                            </p:column>
                            <p:column colspan="2" class="columna2">
                                <p:autoComplete id="pac" value="#{ventasC.cadenaPac}" completeMethod="#{ventasC.completeTextPaciente}"
                                                inputStyle="width: 135%;" minQueryLength="2" class="contPac" />
                            </p:column>
                            <p:column>
                                <p:inputText value="#{ventasC.paciente.DNIPAC}"/>
                            </p:column>
                            <p:column>
                                <p:commandButton value="Buscar Reniec"/>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column class="columna1">
                                <p:outputLabel value="Medicina" />
                            </p:column>
                            <p:column colspan="4">
                                <p:autoComplete id="med" value="#{ventasC.cadenaMed}" completeMethod="#{ventasC.completeTextMedicina}" inputStyle="width: 135%;" minQueryLength="2" class="contMed"/> 
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column class="columna1">
                                <p:outputLabel value="Cantidad"/>
                            </p:column>
                            <p:column>
                                <p:spinner value="#{ventasC.cantPed}" max="50" min="1"/>
                            </p:column>
                            <p:column>

                            </p:column>                            
                        </p:row>
                    </p:panelGrid> 
                    <p:commandButton value="Nuevo" actionListener="#{ventasC.nuevoRegVta()}" update="frmTempVta" />
                <p:commandButton value="Agregar" actionListener="#{ventasC.agregarTmp()}" update="tblProduct frmTempVta" id="btnAgregar" />
                <p:commandButton value="Anular" actionListener="#{ventasC.anularTmp()}" update="tblProduct frmTempVta"/>                    
                    <p:panelGrid>
                        <p:row>
                            <p:column colspan="5">
                                <p:dataTable id="tblProduct" var="product" value="#{ventasC.productos}" emptyMessage="Se tiene la lista sin medicamentos">
                                    <p:column headerText="Id">
                                        <h:outputText value="#{product.idMed}" />
                                    </p:column>
                                    <p:column headerText="Genérico">
                                        <h:outputText value="#{product.generico}" />
                                    </p:column>
                                    <p:column headerText="Comercial">
                                        <h:outputText value="#{product.comercial}" />
                                    </p:column>
                                    <p:column headerText="Proveedor">
                                        <h:outputText value="#{product.proveedor}" />
                                    </p:column>
                                    <p:column headerText="Presentacion">
                                        <h:outputText value="#{product.presentacion}" />
                                    </p:column>
                                    <p:column headerText="Stock">
                                        <h:outputText value="#{product.stockMed}" />
                                    </p:column>
                                    <p:column headerText="Precio">
                                        <h:outputText value="#{product.precio}" />
                                    </p:column>
                                    <p:column headerText="Cantidad">
                                        <h:outputText value="#{product.cantPed}" />
                                    </p:column>
                                    <p:column headerText="SubTotal s/">
                                        <h:outputText value="#{product.subTotal}" />
                                    </p:column>
                                </p:dataTable>
                            </p:column>
                        </p:row>
                        <p:row>
                            <p:column>
                                <p:outputLabel value="Observación"/>
                            </p:column>
                            <p:column colspan="2">
                                <p:inputText value="#{ventasC.regventa.obs}" id="obs" />
                            </p:column>
                            <p:column>
                                <p:commandButton value="Registrar" actionListener="#{ventasC.registar()}" update="tblProduct frmTempVta" id="btnRegistrar" />                                
                            </p:column>
                            <p:column>
                                <p:outputLabel value="Total s/  "/>
                                <p:outputLabel value="#{ventasC.monto}" id="monto"/>
                            </p:column>
                        </p:row>
                        
                    </p:panelGrid>                   
                </center>
            </h:form>        
        <script src="../../resources/js/Calendar.js" type="text/javascript"></script>
    </h:body>
</html>

