<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <h:head>
        <title>Venta de Medicamentos</title>
        <link href="../../resources/css/style.css" rel="stylesheet" type="text/css"/>
    </h:head>
    <h:body>
        <center>
            <h1>Venta de Medicamentos</h1>
            <h:form id="frmTempVta">

                <p:panelGrid columns="4">

                    <p:outputLabel value="# Doc."/>  
                    <p:inputText id="nroDoc" value="#{ventasC.regventa.ndoc}"/>
                    <p:outputLabel value="Fecha" for="calendar" />
                    <p:datePicker id="calendar" value="#{ventasC.regventa.fecha}" locale="es" monthNavigator="true" pattern="dd-MM-yyyy"/>                        
                    <p:outputLabel value="Paciente"/>
                    <p:autoComplete id="pac" value="#{ventasC.cadenaPac}" completeMethod="#{ventasC.completeTextPaciente}"
                                    inputStyle="width: 135%;" minQueryLength="2" class="contPac" />
                    <p:inputText id="dni" value="#{ventasC.paciente.DNIPAC}"/><p:commandButton value="Buscar Reniec" />
                    <p:outputLabel value="Medicina" />
                    <p:autoComplete id="med" value="#{ventasC.cadenaMed}" completeMethod="#{ventasC.completeTextMedicina}" inputStyle="width: 135%;" minQueryLength="2" class="contMed"/> 
                    <p:outputLabel value="Cantidad"/>
                    <p:spinner id="cant" value="#{ventasC.cantPed}" max="50" min="1"/>
                </p:panelGrid> 
                <br/>
                <p:commandButton value="Nuevo" actionListener="#{ventasC.nuevoRegVta()}" update="frmTempVta" />
                <p:commandButton value="Agregar" actionListener="#{ventasC.agregarTmp()}" update="tblProduct frmTempVta" id="btnAgregar" />
                <p:commandButton value="Anular" actionListener="#{ventasC.anularTmp()}" update="tblProduct frmTempVta"/>
                <p/>                

                <p:dataTable id="tblProduct" var="product" value="#{ventasC.productos}" emptyMessage="Se tiene la lista sin medicamentos">
                    <p:column headerText="Id">
                        <h:outputText value="#{product.idMed}" />
                    </p:column>
                    <p:column headerText="Genérico">
                        <h:outputText value="#{product.generico}" />
                    </p:column>
                    <p:column headerText="Comercial">
                        <h:outputText value="#{product.comercial}" />
                    </p:column>
                    <p:column headerText="Proveedor">
                        <h:outputText value="#{product.proveedor}" />
                    </p:column>
                    <p:column headerText="Presentacion">
                        <h:outputText value="#{product.presentacion}" />
                    </p:column>
                    <p:column headerText="Stock">
                        <h:outputText value="#{product.stockMed}" />
                    </p:column>
                    <p:column headerText="Precio">
                        <h:outputText value="#{product.precio}" />
                    </p:column>
                    <p:column headerText="Cantidad">
                        <h:outputText value="#{product.cantPed}" />
                    </p:column>
                    <p:column headerText="SubTotal s/">
                        <h:outputText value="#{product.subTotal}" />
                    </p:column>
                </p:dataTable>
                <br/>
                <p:outputLabel value="Observación"/>
                <p:inputText value="#{ventasC.regventa.obs}" id="obs" />
                <p:commandButton value="Registrar" actionListener="#{ventasC.registar()}" update="tblProduct frmTempVta" id="btnRegistrar" />
                <p:outputLabel value="Total S/ "/>
                <p:outputLabel value="#{ventasC.monto}" id="monto"/>   
                <br/>

            </h:form>        
        </center>
        <script src="../../resources/js/Calendar.js" type="text/javascript"></script>

    </h:body>
</html>

